<template>
    <lightning-card title="Box UI Elements Demo" icon-name="custom:custom19">
        <div class="slds-p-horizontal_medium">
            
            <!-- Button Examples -->
            <div class="slds-m-bottom_large">
                <h3 class="slds-text-heading_small slds-m-bottom_medium">Button Examples</h3>
                
                <div class="slds-m-bottom_small">
                    <c-box-button 
                        label="Primary Button" 
                        type="button"
                        onbuttonclick={handleButtonClick}>
                    </c-box-button>
                    
                    <c-box-button 
                        label="Button with Icon" 
                        type="button"
                        icon-name="utility:save"
                        class-name="slds-m-left_small"
                        onbuttonclick={handleButtonClick}>
                    </c-box-button>
                    
                    <c-box-button 
                        label="Large Button" 
                        type="button"
                        size="large"
                        class-name="slds-m-left_small"
                        onbuttonclick={handleButtonClick}>
                    </c-box-button>
                    
                    <c-box-button 
                        label="Disabled Button" 
                        type="button"
                        is-disabled="true"
                        class-name="slds-m-left_small"
                        onbuttonclick={handleButtonClick}>
                    </c-box-button>
                </div>
                
                <div class="slds-m-bottom_small">
                    <c-box-button 
                        label="Loading Demo" 
                        type="button"
                        is-loading={isLoading}
                        onbuttonclick={handleLoadingDemo}>
                    </c-box-button>
                    
                    <c-box-button 
                        label="With Radar Animation" 
                        type="button"
                        show-radar={showRadarAnimation}
                        class-name="slds-m-left_small"
                        onbuttonclick={handleButtonClick}>
                    </c-box-button>
                </div>
            </div>
            
            <!-- Checkbox Examples -->
            <div class="slds-m-bottom_large">
                <h3 class="slds-text-heading_small slds-m-bottom_medium">Checkbox Examples</h3>
                
                <c-box-checkbox
                    label="Basic Checkbox"
                    name="basic"
                    value="basic"
                    is-checked={checkboxValue}
                    oncheckboxchange={handleCheckboxChange}>
                </c-box-checkbox>
                
                <c-box-checkbox
                    label="Checkbox with Description"
                    name="withDesc"
                    value="withDesc"
                    description="This checkbox has a helpful description below it"
                    oncheckboxchange={handleCheckboxChange}>
                </c-box-checkbox>
                
                <c-box-checkbox
                    field-label="Field Label Example"
                    label="Checkbox with Field Label"
                    name="fieldLabel"
                    value="fieldLabel"
                    tooltip="This is a helpful tooltip"
                    oncheckboxchange={handleCheckboxChange}>
                </c-box-checkbox>
                
                <c-box-checkbox
                    label="Disabled Checkbox"
                    name="disabled"
                    value="disabled"
                    is-disabled="true"
                    is-checked="true"
                    oncheckboxchange={handleCheckboxChange}>
                </c-box-checkbox>
            </div>
            
            <!-- Loading Indicator Examples -->
            <div class="slds-m-bottom_large">
                <h3 class="slds-text-heading_small slds-m-bottom_medium">Loading Indicator Examples</h3>
                
                <div class="slds-grid slds-grid_align-center slds-grid_vertical-align-center slds-wrap">
                    <div class="slds-col slds-size_1-of-4 slds-text-align_center slds-p-around_small">
                        <p class="slds-m-bottom_x-small">Small</p>
                        <c-box-loading-indicator size="small"></c-box-loading-indicator>
                    </div>
                    <div class="slds-col slds-size_1-of-4 slds-text-align_center slds-p-around_small">
                        <p class="slds-m-bottom_x-small">Medium</p>
                        <c-box-loading-indicator size="medium"></c-box-loading-indicator>
                    </div>
                    <div class="slds-col slds-size_1-of-4 slds-text-align_center slds-p-around_small">
                        <p class="slds-m-bottom_x-small">Default</p>
                        <c-box-loading-indicator></c-box-loading-indicator>
                    </div>
                    <div class="slds-col slds-size_1-of-4 slds-text-align_center slds-p-around_small">
                        <p class="slds-m-bottom_x-small">Large</p>
                        <c-box-loading-indicator size="large"></c-box-loading-indicator>
                    </div>
                </div>
            </div>
            
            <!-- Modal Example -->
            <div class="slds-m-bottom_large">
                <h3 class="slds-text-heading_small slds-m-bottom_medium">Modal Example</h3>
                
                <c-box-button 
                    label="Open Modal" 
                    type="button"
                    icon-name="utility:preview"
                    onbuttonclick={handleOpenModal}>
                </c-box-button>
            </div>
            
            <!-- Upload Component Example -->
            <div class="slds-m-bottom_large">
                <h3 class="slds-text-heading_small slds-m-bottom_medium">File Upload Example</h3>
                
                <c-box-content-uploader
                    file-limit="10"
                    use-uploads-manager="true"
                    allowed-extensions="jpg,png,pdf,docx,xlsx"
                    onfilesadded={handleFilesAdded}
                    onuploadcomplete={handleUploadComplete}
                    onuploaderror={handleUploadError}>
                </c-box-content-uploader>
            </div>
            
            <!-- Content Explorer Example -->
            <div class="slds-m-bottom_large">
                <h3 class="slds-text-heading_small slds-m-bottom_medium">Content Explorer Example</h3>
                <div style="height: 400px; border: 1px solid #dddbda; border-radius: 4px;">
                    <c-box-content-explorer
                        token={boxToken}
                        root-folder-id="0"
                        can-download="true"
                        can-delete="true"
                        can-rename="true"
                        can-share="true"
                        can-preview="true"
                        can-upload="true"
                        can-create-new-folder="true"
                        onnavigate={handleNavigate}
                        onselect={handleSelect}
                        oncreate={handleCreate}
                        ondelete={handleDelete}
                        onrename={handleRename}
                        ondownload={handleDownload}
                        onupload={handleUpload}>
                    </c-box-content-explorer>
                </div>
            </div>
            
            <!-- Content Picker Example -->
            <div class="slds-m-bottom_large">
                <h3 class="slds-text-heading_small slds-m-bottom_medium">Content Picker Example</h3>
                
                <c-box-button
                    label="Open File Picker"
                    type="button"
                    icon-name="utility:file"
                    onbuttonclick={openPicker}>
                </c-box-button>
                
                <template if:true={selectedFiles.length}>
                    <div class="slds-m-top_small">
                        <p class="slds-text-body_small slds-m-bottom_x-small">Selected files:</p>
                        <ul class="slds-list_dotted">
                            <template for:each={selectedFiles} for:item="file">
                                <li key={file.id}>{file.name}</li>
                            </template>
                        </ul>
                    </div>
                </template>
            </div>
            
            <!-- Content Preview Example -->
            <div class="slds-m-bottom_large">
                <h3 class="slds-text-heading_small slds-m-bottom_medium">Content Preview Example</h3>
                <div class="slds-box" style="height: 500px;">
                    <c-box-content-preview
                        file-id={previewFileId}
                        token={boxToken}
                        show-annotations="false"
                        can-download="true"
                        can-print="true"
                        onload={handlePreviewLoad}
                        onerror={handlePreviewError}>
                    </c-box-content-preview>
                </div>
            </div>
            
            <!-- Box AI Examples -->
            <div class="slds-m-bottom_large">
                <h3 class="slds-text-heading_small slds-m-bottom_medium">Box AI Examples</h3>
                
                <div class="slds-grid slds-wrap slds-gutters">
                    <!-- Ask Mode -->
                    <div class="slds-col slds-size_1-of-1 slds-large-size_1-of-2">
                        <c-box-a-i
                            token={boxToken}
                            file-id={previewFileId}
                            mode="ask"
                            placeholder="Ask a question about this document..."
                            onresponse={handleAIResponse}>
                        </c-box-a-i>
                    </div>
                    
                    <!-- Summarize Mode -->
                    <div class="slds-col slds-size_1-of-1 slds-large-size_1-of-2">
                        <c-box-a-i
                            token={boxToken}
                            file-id={previewFileId}
                            mode="summarize"
                            onsummary={handleAISummary}>
                        </c-box-a-i>
                    </div>
                </div>
            </div>
            
            <!-- Content Sidebar Example -->
            <div class="slds-m-bottom_large">
                <h3 class="slds-text-heading_small slds-m-bottom_medium">Content Sidebar Example</h3>
                <div class="slds-grid">
                    <div class="slds-col slds-size_1-of-2">
                        <div class="slds-box slds-theme_shade" style="height: 400px;">
                            <p class="slds-text-align_center slds-p-around_large">
                                Preview or content would be displayed here
                            </p>
                        </div>
                    </div>
                    <div class="slds-col slds-size_1-of-2" style="height: 400px;">
                        <c-box-content-sidebar
                            file-id={previewFileId}
                            token={boxToken}
                            show-a-i="true"
                            default-panel="ai">
                        </c-box-content-sidebar>
                    </div>
                </div>
            </div>
            
        </div>
    </lightning-card>
    
    <!-- Modal Component -->
    <c-box-modal
        title="Example Modal"
        is-open={isModalOpen}
        size="medium"
        onrequestclose={handleCloseModal}>
        
        <!-- Modal Body -->
        <div class="slds-p-around_medium">
            <p class="slds-m-bottom_medium">This is an example modal using the converted Box UI Elements.</p>
            
            <c-box-checkbox
                label="Accept terms and conditions"
                name="modalCheckbox"
                value="accept"
                description="You must accept the terms to continue"
                oncheckboxchange={handleCheckboxChange}>
            </c-box-checkbox>
        </div>
        
        <!-- Modal Footer -->
        <div slot="footer">
            <c-box-button 
                label="Cancel" 
                type="button"
                class-name="slds-m-right_small"
                onbuttonclick={handleModalCancel}>
            </c-box-button>
            <c-box-button 
                label="Save" 
                type="button"
                icon-name="utility:save"
                onbuttonclick={handleModalSave}>
            </c-box-button>
        </div>
    </c-box-modal>
    
    <!-- Content Picker Modal -->
    <template if:true={showPicker}>
        <section role="dialog" tabindex="-1" class="slds-modal slds-modal_large slds-fade-in-open" aria-modal="true">
            <div class="slds-modal__container">
                <header class="slds-modal__header">
                    <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" 
                            title="Close" 
                            onclick={closePicker}>
                        <lightning-icon icon-name="utility:close" 
                                        alternative-text="close" 
                                        variant="inverse" 
                                        size="small">
                        </lightning-icon>
                        <span class="slds-assistive-text">Close</span>
                    </button>
                    <h2 class="slds-modal__title">Select Files</h2>
                </header>
                <div class="slds-modal__content slds-p-around_none" style="height: 500px;">
                    <c-box-content-picker
                        token={boxToken}
                        root-folder-id="0"
                        can-select-multiple="true"
                        onchoose={handleChoose}
                        oncancel={closePicker}>
                    </c-box-content-picker>
                </div>
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </template>
</template>